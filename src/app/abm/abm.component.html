<button type="button" class="btn btn-primary" data-toggle="modal" data-target="#agregarModal" >Agregar Libro</button>
<table  class="table">
  <thead>
    <tr>
      <th scope="col">No</th>
      <th scope="col">Titulo</th>
      <th scope="col">Fecha</th>
      <th scope="col">Cantidad</th>
      <th scope="col">Precio</th>
      <th scope="col">Acciones</th>
    </tr>
  </thead>
  <tr *ngFor="let book of books | async">
    <th scope="col">{{book.numero}}</th>
    <th scope="col">{{book.titulo}}</th>
    <th scope="col">{{book.fecha}}</th>
    <th scope="col">{{book.cantidad}}</th>
    <th scope="col">{{book.precio}}</th>
    <th scope="col">
      <button (click)="bookSelected = book" type="button" class="btn btn-primary" data-toggle="modal" data-target="#editModal" >Editar</button>
      <button (click)="bookSelected = book" type="button" class="btn btn-danger" data-toggle="modal" data-target="#deleteModal"  >Eliminar</button>
    </th>
  </tr>
</table>

<!-- agregar Modal -->
<div class="modal fade" id="agregarModal" tabindex="-1" role="dialog" aria-labelledby="agregarModalLabel" aria-hidden="true">
    <div class="modal-dialog" role="document">
        <div class="modal-content">
            <div class="modal-header">
                <h5 class="modal-title" id="agregarModalLabel">Agregar libro</h5>
                <button type="button" class="close" id="closeAgregar" data-dismiss="modal" aria-label="Close">
                    <span aria-hidden="true">&times;</span>
                </button>
            </div>
            <div class="modal-body">
                <div class="form-group">
                    <label for="_numero">Numero</label>
                    <input [(ngModel)]="numero" type="text" class="form-control" id="_numero" aria-describedby="_numeroHelper" placeholder="Numero">
                    <small id="_numeroHelper" class="form-text text-muted">Numero.</small>
                </div>
                <div class="form-group">
                    <label for="_titulo">Titulo</label>
                    <input [(ngModel)]="titulo" type="text" class="form-control" id="_titulo" aria-describedby="_tituloHelper" placeholder="Ingresar titulo">
                    <small id="_tituloHelper" class="form-text text-muted">Titulo del libro.</small>
                </div>
                <div class="form-group">
                    <label for="_titulo">Fecha</label>
                    <input [(ngModel)]="fecha" type="text" class="form-control" id="_fecha" aria-describedby="_fechaHelper" placeholder="Ingresar la fecha">
                    <small id="_fechaHelper" class="form-text text-muted">Fecha de salida.</small>
                </div>
                <div class="form-group">
                    <label for="_titulo">Cantidad</label>
                    <input [(ngModel)]="cantidad" type="text" class="form-control" id="_cantidad" aria-describedby="_cantidadHelper" placeholder="Ingresar el stock">
                    <small id="_cantidadHelper" class="form-text text-muted">Stock.</small>
                </div>
                <div class="form-group">
                    <label for="_titulo">Precio</label>
                    <input [(ngModel)]="precio" type="text" class="form-control" id="_precio" aria-describedby="_precioHelper" placeholder="Ingresar el precio">
                    <small id="_precioHelper" class="form-text text-muted">Precio del libro.</small>
                </div>

            </div>
            <div class="modal-footer">
                <button type="button" class="btn btn-secondary" data-dismiss="modal">Close</button>
                <button type="button" class="btn btn-primary" (click)="save()">Guardar</button>
            </div>
        </div>
    </div>
</div>


<!-- Edit Modal -->
<div class="modal fade" id="editModal" tabindex="-1" role="dialog" aria-labelledby="editModalLabel" aria-hidden="true">
  <div class="modal-dialog" role="document">
    <div class="modal-content">
      <div class="modal-header">
        <h5 class="modal-title" id="editModalLabel">Edit: __LIBRO___</h5>
        <button id="closeEdit" type="button" class="close" data-dismiss="modal" aria-label="Close">
          <span aria-hidden="true">&times;</span>
        </button>
      </div>
        <div class="modal-body">
            <div class="form-group">
                <label for="_numero">Numero</label>
                <input [(ngModel)]="bookSelected.numero" type="text" class="form-control" id="_numero" aria-describedby="_numeroHelper" placeholder="Numero">
                <small id="_numeroHelper" class="form-text text-muted">Numero.</small>
            </div>
            <div class="form-group">
                <label for="_titulo">Titulo</label>
                <input [(ngModel)]="bookSelected.titulo" type="text" class="form-control" id="_titulo" aria-describedby="_tituloHelper" placeholder="Ingresar titulo">
                <small id="_tituloHelper" class="form-text text-muted">Titulo del libro.</small>
            </div>
            <div class="form-group">
                <label for="_titulo">Fecha</label>
                <input [(ngModel)]="bookSelected.fecha" type="text" class="form-control" id="_fecha" aria-describedby="_fechaHelper" placeholder="Ingresar la fecha">
                <small id="_fechaHelper" class="form-text text-muted">Fecha de salida.</small>
            </div>
            <div class="form-group">
                <label for="_titulo">Cantidad</label>
                <input [(ngModel)]="bookSelected.cantidad" type="text" class="form-control" id="_cantidad" aria-describedby="_cantidadHelper" placeholder="Ingresar el stock">
                <small id="_cantidadHelper" class="form-text text-muted">Stock.</small>
            </div>
            <div class="form-group">
                <label for="_titulo">Precio</label>
                <input [(ngModel)]="bookSelected.precio" type="text" class="form-control" id="_precio" aria-describedby="_precioHelper" placeholder="Ingresar el precio">
                <small id="_precioHelper" class="form-text text-muted">Precio del libro.</small>
            </div>

        </div>
      <div class="modal-footer">
        <button type="button" class="btn btn-secondary" data-dismiss="modal">Close</button>
        <button type="button" class="btn btn-primary" (click)="update()">Editar</button>
      </div>
    </div>
  </div>
</div>

<!-- delete Modal -->
<div class="modal fade" id="deleteModal" tabindex="-1" role="dialog" aria-labelledby="deleteModalLabel" aria-hidden="true">
  <div class="modal-dialog" role="document">
    <div class="modal-content">
      <div class="modal-header">
        <h5 class="modal-title" id="deleteModalLabel">Delete: title</h5>
        <button id="closeDelete" type="button" class="close" data-dismiss="modal" aria-label="Close">
          <span aria-hidden="true">&times;</span>
        </button>
      </div>
      <div class="modal-body">
        Â¿Esta seguro que desea eliminar "{{bookSelected?.titulo}}"?
      </div>
      <div class="modal-footer">
        <button type="button" class="btn btn-secondary" data-dismiss="modal">Cancelar</button>
        <button type="button" class="btn btn-primary" (click)="delete()">Eliminar</button>
      </div>
    </div>
  </div>
</div>
